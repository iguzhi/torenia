<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>

  <link href="https://cdnjs.cloudflare.com/ajax/libs/antd/3.16.1/antd.css" rel="stylesheet" />
  <link href="./dist/torenia.min.css" rel="stylesheet" />

  <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.22.1/moment.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/react/16.4.0/umd/react.development.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/16.4.0/umd/react-dom.development.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prop-types/15.6.1/prop-types.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/antd/3.16.1/antd.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-polyfill/7.0.0-beta.49/polyfill.js"></script>

  <script src="./dist/torenia.min.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.0.0-beta.3/babel.js"></script>
</head>
<body>

  <div id="root"></div>

  <script type="text/babel">
  class Form extends React.Component {
    constructor(props) {
      super(props);
      this.state = {
        formData: {
          name: 'React',
          birthday: moment(),
          phone: {
            code: '025',
            phone: '07680750'
          },
          tasks: [
            {title: '早饭', content: '鸡蛋豆浆'},
            {title: '锻炼', content: '健腹轮'}
          ]
        }
      }
      window.aa = this;
    }

    get formConfig() {
      return {
        value: this.state.formData,
        onChange: ({newFormData}) => {
          this.setState({
            formData: newFormData
          });
        },
        fields: [
          { label: '姓名', name: 'name', widget: 'Input', validator: {
            message: '统一消息',
            rules: {
              required: true,
              maxlength: {
                value: 4,
                message: '对象消息长度'
              },
            }
          } },
          { label: '电话', name: 'phone', fields: [
            { label: '区号', name: 'code' },
            { label: '号码', name: 'phone' }
          ] },
          { label: '模式', name: 'mode', widget: 'AutoComplete', dataSource: ['123', '234', '345'] },
          { label: '生日', name: 'birthday', widget: 'DatePicker' },
          { label: '记住我', name: 'remember', widget: 'Checkbox', text: '记住我' },
          { label: '一个单选', name: 'radio', widget: 'Radio', text: '测试Radio' },
          { label: '性别', name: 'gender', widget: 'Radio.Group', options: [
            {label: '男', value: 1},
            {label: '女', value: 0},
            {label: '未知', value: 2, disabled: true},
          ] },
          { label: '评分', name: 'rate', widget: 'Rate', allowHalf: true, },
          { label: '状态', name: 'status', widget: 'Select', options: [
            {label: '已激活', value: 1},
            {label: '未激活', value: 0},
          ]},
          {
            label: '任务列表', name: 'tasks', type: 'array', fields: [
              { label: '任务名称', name: 'title' },
              { label: '任务内容', name: 'content' },
            ]
          },
          { label: '区间', name: 'range', widget: 'Slider' },
          { label: '自动续费', name: 'auto', widget: 'Switch' },
          { label: '时间', name: 'activeTime', widget: 'TimePicker' },
          { label: '权限', name: 'role', widget: 'Transfer', dataSource: [
            {key: 1, title: '管理员', description: '管理角色'},
            {key: 2, title: '操作员', description: '操作角色'},
            {key: 3, title: '观察员', description: '观察角色'},
          ], render: item => item.title },
        ],
        onSubmit: () => {

        },

      }
    }

    change() {
      const { formData } = this.state;
      this.setState({
        formData: {
          ...formData,
          radio: !formData.radio
        },
      })
    }


    render() {
      return <React.Fragment>
        <torenia.Form
          { ...this.formConfig }
        />
        <antd.Button onClick={() => this.change()}>变值</antd.Button>
      </React.Fragment>
    }
  }

  ReactDOM.render(<Form />, document.getElementById('root'));

  </script>
</body>
</html>
